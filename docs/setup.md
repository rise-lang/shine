---
id: setup
title: Technical Setup
sidebar_label: Technical Setup
---

## Basic Setup

Prerequisites: [`git`](https://git-scm.com/), [`Java 8 to 17 SDK`](https://openjdk.java.net/install/), [`sbt`](https://www.scala-sbt.org/), [`OpenCL`](https://www.khronos.org/opencl/), C++ build tools such as [`clang`](https://llvm.org/)

[See more details on installing the dependencies below](#installing-dependencies).

1. Clone the [`shine`](https://github.com/rise-lang/shine) repository to a directory of your choice that we call `$SHINE_ROOT`.
2. In `$SHINE_ROOT`, run `setup.sh` to download all required submodules.
3. Run `sbt compile` (perform this steps even if you want to use IDEA IntelliJ, because IntelliJ does not execute all subproject dependencies correctly that are required for an initial setup).
4. Run `sbt test`.

## Configuring VSCode

Install VSCode and its `scalameta.metals` extension, it should work out of the box.

## Configuring IntelliJ

OUTDATED INTSTRUCTIONS: please contact the developers if you have a working IntelliJ setup or need help with it.

1. Download IDEA IntelliJ (http://www.jetbrains.com/idea/) and choose to install the Scala Plugin during setup.
2. Launch IntelliJ. From the menu choose `File` -> `Open...`. Then, select `$SHINE_ROOT` and press `OK`.
3. From the menu bar choose `Run` -> `Edit Configurations...`. Under `Templates` choose `ScalaTest` and add the following line to `VM parameters`: `-Djava.library.path=lib/executor/lib/Executor/build -Xss26m` (this will tell IntelliJ where to find the Executor library and use 26MB of thread stack size which is needed for arithmetic simplifactions sometimes).

## Installing Dependencies

### Docker Image

NOT MAINTAINED: please contact the developers if you would like an up to date one.

### On Debian:

1. Download the [coursier installer](https://get-coursier.io/docs/cli-installation) and install the Scala tools with JDK 17: `./cs setup --jvm temurin:17`
2. Update apt packages: `sudo apt update`
3. Install C++ build dependencies: `sudo apt install cmake clang libc++-dev libc++abi-dev`
4. Install JNI dependencies: `sudo apt install libxtst6 libxrender1 libxext6`
5. Install Portable OpenCL: `sudo apt install ocl-icd-opencl-dev opencl-headers libpocl-dev pocl-opencl-icd`

### On NixOS:

1. Add `pkgs.intel-ocl` to `hardware.opengl.extraPackages` and `nixos-rebuild`.
   Running `nix-shell -p clinfo --run clinfo` should show OpenCL support.
2. You will need `sbt`, `cmake` and `gcc` to compile the project: `nix-env -iA nixos.sbt nixos.cmake nixos.gcc`.
3. You will need `clang` to run some of the tests, however some utilities clash with `gcc`s, so we need to:
   ```
   nix-env --set-flag priority 15 gcc-wrapper # give gcc less priority
   nix-env -iA nixos.clang                    # install clang
   ```
4. Help `FindOpenCL` find the OpenCL library in NixOS:
   ```
   export LD_LIBRARY_PATH="${nix-build '<nixos>' --no-build-output ocl-icd}/lib/:$LD_LIBRARY_PATH"
   sbt compile
   ```
   (From now on `sbt compile` does not need to be told where the OpenCL bindings are.)
5. We can now run the tests with `sbt test`.

## Running the Tests

You can run the test suite with `sbt test`.
You can run subsets or specific tests using `testOnly`, e.g., `sbt "testOnly rise.*"` to run all the RISE tests, or `sbt "testOnly rise.elevate.circularBuffering"` to run that specific test.
You can output debugging information generated by the tests by setting the `RISE_LOG_LEVEL` environment variable to `debug`: `RISE_LOG_LEVEL=debug sbt "testOnly rise.*"`.